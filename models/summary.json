{
  "models": {
    "rf": {
      "best_params": {
        "n_estimators": 344,
        "max_depth": 24,
        "min_samples_split": 2,
        "min_samples_leaf": 1,
        "max_features": null,
        "bootstrap": true
      },
      "best_primary_value": -0.03733591158059788,
      "metrics_test": {
        "r2": 0.3765721261740158,
        "mse": 0.3165269027422176,
        "rmse": 0.5626072366600146,
        "mae": 0.3630789791908061,
        "mape": 0.03337764834979777,
        "explained_variance": 0.37666646267460235,
        "medae": 0.26606909929316647
      },
      "metrics_train": {
        "r2": 0.9454368126795857,
        "mse": 0.02912521176150314,
        "rmse": 0.17066110207514523,
        "mae": 0.1155437814581767,
        "mape": 0.010677641182367246,
        "explained_variance": 0.9454680873357086,
        "medae": 0.0848893808136344
      },
      "metrics_test_original": {
        "r2": 0.5406160943750962,
        "mse": 3545888727.406943,
        "rmse": 59547.36541113253,
        "mae": 33328.304213899,
        "mape": 0.6920905289406066,
        "explained_variance": 0.5494759994089292,
        "medae": 20641.265600688792,
        "mape_floor": 0.6920905289406066
      },
      "metrics_train_original": {
        "r2": 0.9292883264481342,
        "mse": 303885135.07801026,
        "rmse": 17432.301485403765,
        "mae": 9764.749180895154,
        "mape": 0.1225681380360383,
        "explained_variance": 0.9311339394114643,
        "medae": 6058.233825022293,
        "mape_floor": 0.12097232412744988
      },
      "smearing_factor": 1.0180234390187957,
      "overfit": {
        "gap_r2": 0.5688646865055699,
        "gap_explained_variance": 0.5688016246611063,
        "ratio_rmse": 3.2966342641587314,
        "delta_rmse": 0.3919461345848693,
        "ratio_mse": 10.86779747162538,
        "delta_mse": 0.2874016909807145,
        "ratio_mae": 3.142349805491086,
        "delta_mae": 0.24753519773262941,
        "ratio_mape": 3.1259383771873392,
        "delta_mape": 0.022700007167430522,
        "ratio_medae": 3.1343036872573364,
        "delta_medae": 0.18117971847953207
      }
    },
    "gbr": {
      "best_params": {
        "learning_rate": 0.014755884383302624,
        "n_estimators": 561,
        "max_depth": 5,
        "subsample": 0.5766601823183455,
        "min_samples_leaf": 1,
        "max_features": null,
        "min_samples_split": 7,
        "min_impurity_decrease": 0.009864438325883082
      },
      "best_primary_value": -0.03599600518435839,
      "metrics_test": {
        "r2": 0.3981611937173313,
        "mse": 0.30556569781462783,
        "rmse": 0.5527799723349498,
        "mae": 0.36875042340723635,
        "mape": 0.03393371428682663,
        "explained_variance": 0.4015282936722021,
        "medae": 0.2704533175508814
      },
      "metrics_train": {
        "r2": 0.9023774067806246,
        "mse": 0.052109835217738466,
        "rmse": 0.228275787629215,
        "mae": 0.17956848254787341,
        "mape": 0.016241682222613792,
        "explained_variance": 0.9023780757223426,
        "medae": 0.14911259282848288
      },
      "metrics_test_original": {
        "r2": 0.5841819119369136,
        "mse": 3209613251.7074265,
        "rmse": 56653.44871856811,
        "mae": 34998.42374575556,
        "mape": 0.7244221042346946,
        "explained_variance": 0.5853350156903407,
        "medae": 22908.565972699216,
        "mape_floor": 0.7244221042346946
      },
      "metrics_train_original": {
        "r2": 0.8796105022554316,
        "mse": 517376791.5031432,
        "rmse": 22745.918128383895,
        "mae": 15495.053603258215,
        "mape": 0.18934067614687897,
        "explained_variance": 0.8808999571332907,
        "medae": 10645.790682569204,
        "mape_floor": 0.18881210033326842
      },
      "smearing_factor": 1.026577840287528,
      "overfit": {
        "gap_r2": 0.5042162130632933,
        "gap_explained_variance": 0.5008497820501405,
        "ratio_rmse": 2.421544475110178,
        "delta_rmse": 0.32450418470573483,
        "ratio_mse": 5.8638776449366246,
        "delta_mse": 0.25345586259688935,
        "ratio_mae": 2.05353644567847,
        "delta_mae": 0.18918194085936293,
        "ratio_mape": 2.0892980063099422,
        "delta_mape": 0.017692032064212836,
        "ratio_medae": 1.8137523626993128,
        "delta_medae": 0.12134072472239854
      }
    },
    "hgbt": {
      "best_params": {
        "learning_rate": 0.11564323687988118,
        "max_depth": 9,
        "max_leaf_nodes": 28,
        "l2_regularization": 4.254829768761493,
        "max_bins": 223,
        "min_samples_leaf": 47
      },
      "best_primary_value": -0.037502653013538126,
      "metrics_test": {
        "r2": 0.3743355865165716,
        "mse": 0.3176624390253267,
        "rmse": 0.5636155063740943,
        "mae": 0.3794540474069584,
        "mape": 0.034910717369326334,
        "explained_variance": 0.3805266743222422,
        "medae": 0.27810989957212673
      },
      "metrics_train": {
        "r2": 0.8635784527712276,
        "mse": 0.0728202776816764,
        "rmse": 0.26985232569254686,
        "mae": 0.17467202969214013,
        "mape": 0.01637328354471053,
        "explained_variance": 0.8635784550951011,
        "medae": 0.12607345994640706
      },
      "metrics_test_original": {
        "r2": 0.5664280615793796,
        "mse": 3346651526.405391,
        "rmse": 57850.250875907106,
        "mae": 36582.36217343428,
        "mape": 0.7836922565676627,
        "explained_variance": 0.5664312753192811,
        "medae": 23619.37320051348,
        "mape_floor": 0.7836922565676627
      },
      "metrics_train_original": {
        "r2": 0.8691690743053289,
        "mse": 562249081.8004011,
        "rmse": 23711.792041100587,
        "mae": 14225.24781683199,
        "mape": 0.20988242968356852,
        "explained_variance": 0.8696523494335737,
        "medae": 9425.323530588197,
        "mape_floor": 0.1977916313862197
      },
      "smearing_factor": 1.0331713205029505,
      "overfit": {
        "gap_r2": 0.48924286625465596,
        "gap_explained_variance": 0.48305178077285893,
        "ratio_rmse": 2.0886071851618695,
        "delta_rmse": 0.29376318068154744,
        "ratio_mse": 4.362279973909786,
        "delta_mse": 0.2448421613436503,
        "ratio_mae": 2.172380134791741,
        "delta_mae": 0.20478201771481824,
        "ratio_mape": 2.1321757040361287,
        "delta_mape": 0.018537433824615805,
        "ratio_medae": 2.2059353308011795,
        "delta_medae": 0.15203643962571967
      }
    },
    "xgboost": {
      "best_params": {
        "n_estimators": 1490,
        "max_depth": 5,
        "learning_rate": 0.03901044121552236,
        "subsample": 0.8066263655481786,
        "colsample_bytree": 0.6215029257598542,
        "min_child_weight": 2.737547969339373,
        "reg_alpha": 0.0013122326236070568,
        "reg_lambda": 0.0010622037411067188,
        "gamma": 0.17016094137148197
      },
      "best_primary_value": -0.0359370306861518,
      "metrics_test": {
        "r2": 0.41163767599553114,
        "mse": 0.29872341601352626,
        "rmse": 0.5465559587210868,
        "mae": 0.36307286639731573,
        "mape": 0.03341601210196206,
        "explained_variance": 0.41432903079697503,
        "medae": 0.27473243022517035
      },
      "metrics_train": {
        "r2": 0.9350277584202407,
        "mse": 0.03468144709944444,
        "rmse": 0.18622955484950407,
        "mae": 0.14444200295700996,
        "mape": 0.013039240587460347,
        "explained_variance": 0.9350278139740048,
        "medae": 0.1175994096579851
      },
      "metrics_test_original": {
        "r2": 0.6384162117142389,
        "mse": 2790989982.880393,
        "rmse": 52829.820962032354,
        "mae": 33742.861071957006,
        "mape": 0.6802472476505561,
        "explained_variance": 0.6397189659463762,
        "medae": 20783.41045184445,
        "mape_floor": 0.6802472476505561
      },
      "metrics_train_original": {
        "r2": 0.919901868209803,
        "mse": 344223667.407714,
        "rmse": 18553.26568040554,
        "mae": 12608.685526067611,
        "mape": 0.15020604611896748,
        "explained_variance": 0.920943631293234,
        "medae": 8954.830078124985,
        "mape_floor": 0.14985376240955203
      },
      "smearing_factor": 1.017351153032766,
      "overfit": {
        "gap_r2": 0.5233900824247095,
        "gap_explained_variance": 0.5206987831770298,
        "ratio_rmse": 2.9348508036910137,
        "delta_rmse": 0.36032640387158266,
        "ratio_mse": 8.613349239925789,
        "delta_mse": 0.2640419689140818,
        "ratio_mae": 2.513623869542826,
        "delta_mae": 0.21863086344030577,
        "ratio_mape": 2.56272686111013,
        "delta_mape": 0.020376771514501714,
        "ratio_medae": 2.3361718483466536,
        "delta_medae": 0.15713302056718526
      }
    },
    "lightgbm": {
      "best_params": {
        "n_estimators": 1499,
        "max_depth": 7,
        "learning_rate": 0.09602933794152144,
        "num_leaves": 47,
        "subsample": 0.7636041902974168,
        "colsample_bytree": 0.8365905779919387,
        "reg_alpha": 0.07420951704459924,
        "reg_lambda": 0.016065035592074,
        "min_child_samples": 33,
        "min_split_gain": 0.057221053557877766
      },
      "best_primary_value": -0.037329623576276574,
      "metrics_test": {
        "r2": 0.37302342804419963,
        "mse": 0.31832864834095764,
        "rmse": 0.5642062108316052,
        "mae": 0.37642418143917833,
        "mape": 0.03463009655134929,
        "explained_variance": 0.3779957685992277,
        "medae": 0.2487054430444946
      },
      "metrics_train": {
        "r2": 0.8895732407249948,
        "mse": 0.05894455412097497,
        "rmse": 0.24278499566689654,
        "mae": 0.16744421402071263,
        "mape": 0.015552628627245123,
        "explained_variance": 0.8895732412830188,
        "medae": 0.12484661877552572
      },
      "metrics_test_original": {
        "r2": 0.5726380531817831,
        "mse": 3298717894.09779,
        "rmse": 57434.46608176827,
        "mae": 36151.541985834214,
        "mape": 0.7803470176642676,
        "explained_variance": 0.5726944490959209,
        "medae": 22358.057445944018,
        "mape_floor": 0.7803470176642676
      },
      "metrics_train_original": {
        "r2": 0.8878288499481919,
        "mse": 482058242.6230815,
        "rmse": 21955.824799425813,
        "mae": 13886.76103846404,
        "mape": 0.18790706430929824,
        "explained_variance": 0.8884462168012109,
        "medae": 9200.491472571266,
        "mape_floor": 0.1814185161031508
      },
      "smearing_factor": 1.0274861693160227,
      "overfit": {
        "gap_r2": 0.5165498126807951,
        "gap_explained_variance": 0.5115774726837912,
        "ratio_rmse": 2.323892418812,
        "delta_rmse": 0.3214212151647086,
        "ratio_mse": 5.400475974211888,
        "delta_mse": 0.25938409421998265,
        "ratio_mae": 2.2480572627765754,
        "delta_mae": 0.2089799674184657,
        "ratio_mape": 2.226639456347863,
        "delta_mape": 0.01907746792410417,
        "ratio_medae": 1.9920879354503553,
        "delta_medae": 0.12385882426896888
      }
    },
    "catboost": {
      "best_params": {
        "depth": 6,
        "learning_rate": 0.10101473226385088,
        "l2_leaf_reg": 9.900716774514109,
        "bagging_temperature": 4.594789021042061,
        "border_count": 133,
        "random_strength": 0.7674346694993652,
        "rsm": 0.618729904537811
      },
      "best_primary_value": -0.03610181411002422,
      "metrics_test": {
        "r2": 0.39995811582514196,
        "mse": 0.3046533642261989,
        "rmse": 0.5519541323572086,
        "mae": 0.37578977504541516,
        "mape": 0.03458328597029195,
        "explained_variance": 0.4025828423839237,
        "medae": 0.2863741077031081
      },
      "metrics_train": {
        "r2": 0.8798754902951327,
        "mse": 0.06412110352636988,
        "rmse": 0.2532214515525292,
        "mae": 0.18108052308128705,
        "mape": 0.01663504097620956,
        "explained_variance": 0.8798756041201714,
        "medae": 0.13897690774245852
      },
      "metrics_test_original": {
        "r2": 0.5397143705831651,
        "mse": 3552848945.625066,
        "rmse": 59605.7794649568,
        "mae": 35381.473045894054,
        "mape": 0.7347105560816987,
        "explained_variance": 0.5417051641530051,
        "medae": 21853.382537149326,
        "mape_floor": 0.7347105560816987
      },
      "metrics_train_original": {
        "r2": 0.883580982043992,
        "mse": 500313558.1462603,
        "rmse": 22367.6900494052,
        "mae": 15072.455725543754,
        "mape": 0.20286017209338766,
        "explained_variance": 0.884413619760896,
        "medae": 10381.623968033207,
        "mape_floor": 0.20101358648820689
      },
      "smearing_factor": 1.030135541312467,
      "overfit": {
        "gap_r2": 0.4799173744699907,
        "gap_explained_variance": 0.4772927617362477,
        "ratio_rmse": 2.1797289644029596,
        "delta_rmse": 0.2987326808046794,
        "ratio_mse": 4.751218358257197,
        "delta_mse": 0.240532260699829,
        "ratio_mae": 2.075263361574912,
        "delta_mae": 0.1947092519641281,
        "ratio_mape": 2.0789420368576725,
        "delta_mape": 0.017948244994082388,
        "ratio_medae": 2.060587707375062,
        "delta_medae": 0.1473971999606496
      }
    }
  },
  "ensembles": {
    "voting": {
      "type": "voting",
      "members": [
        "xgboost",
        "gbr",
        "catboost"
      ],
      "metrics_train": {
        "r2": 0.9328757358287159,
        "mse": 0.035830172398896507,
        "rmse": 0.18928859553310787,
        "mae": 0.14700288066922,
        "mape": 0.013271937228140185,
        "explained_variance": 0.9328757457139177,
        "medae": 0.119811514981218
      },
      "metrics_test": {
        "r2": 0.4193053637740656,
        "mse": 0.2948303763121745,
        "rmse": 0.5429828508453785,
        "mae": 0.3570622708487278,
        "mape": 0.03291632235098642,
        "explained_variance": 0.4218440328947005,
        "medae": 0.2728134987849753
      },
      "metrics_train_original": {
        "r2": 0.916545377917599,
        "mse": 358648265.9867064,
        "rmse": 18938.011141265768,
        "mae": 12821.3958411597,
        "mape": 0.15281618138830777,
        "explained_variance": 0.9177800537941738,
        "medae": 8892.590003497568
      },
      "metrics_test_original": {
        "r2": 0.6140415768060912,
        "mse": 2979132715.129338,
        "rmse": 54581.431962979295,
        "mae": 33535.98613865827,
        "mape": 0.7232839350872978,
        "explained_variance": 0.6160438107047683,
        "medae": 21192.531334894364,
        "mape_floor": 0.7232839350872978
      },
      "overfit": {
        "gap_r2": 0.5135703720546503,
        "gap_explained_variance": 0.5110317128192172,
        "ratio_rmse": 2.868544981889345,
        "delta_rmse": 0.3536942553122706,
        "ratio_mse": 8.228550313122541,
        "delta_mse": 0.259000203913278,
        "ratio_mae": 2.4289474411877348,
        "delta_mae": 0.21005939017950784,
        "ratio_mape": 2.480144517350089,
        "delta_mape": 0.019644385122846234,
        "ratio_medae": 2.2770223615630125,
        "delta_medae": 0.1530019838037573
      }
    },
    "stacking": {
      "type": "stacking",
      "members": [
        "xgboost",
        "gbr",
        "catboost",
        "lightgbm",
        "rf"
      ],
      "final_estimator": "ridge",
      "metrics_train": {
        "r2": 0.9388367704029202,
        "mse": 0.032648239619350296,
        "rmse": 0.18068823874107107,
        "mae": 0.1371440077866307,
        "mape": 0.012598590111249615,
        "explained_variance": 0.942504279811838,
        "medae": 0.11091973332770966
      },
      "metrics_test": {
        "r2": 0.43216200903635116,
        "mse": 0.288302798262845,
        "rmse": 0.5369383561106852,
        "mae": 0.3569412134293677,
        "mape": 0.03300003283359664,
        "explained_variance": 0.4395992150885961,
        "medae": 0.2857480417747338
      },
      "metrics_train_original": {
        "r2": 0.9219551884293025,
        "mse": 335399473.8775846,
        "rmse": 18313.914761120424,
        "mae": 11926.488828601781,
        "mape": 0.14002241702098026,
        "explained_variance": 0.9249477805044314,
        "medae": 7902.870337263981
      },
      "metrics_test_original": {
        "r2": 0.5940401821692147,
        "mse": 3133519316.1985264,
        "rmse": 55977.84665560588,
        "mae": 33384.93810784479,
        "mape": 0.7285768727840409,
        "explained_variance": 0.6008011354631553,
        "medae": 21605.99691195046,
        "mape_floor": 0.7285768727840409
      },
      "overfit": {
        "gap_r2": 0.5066747613665691,
        "gap_explained_variance": 0.5029050647232419,
        "ratio_rmse": 2.9716287006379307,
        "delta_rmse": 0.3562501173696141,
        "ratio_mse": 8.830577134455075,
        "delta_mse": 0.2556545586434947,
        "ratio_mae": 2.6026745111948206,
        "delta_mae": 0.219797205642737,
        "ratio_mape": 2.6193433187519957,
        "delta_mape": 0.020401442722347028,
        "ratio_medae": 2.576169570571344,
        "delta_medae": 0.17482830844702413
      }
    }
  },
  "baselines": {
    "rf": {
      "metrics_test": {
        "r2": 0.3868001657863409,
        "mse": 0.3113339207862686,
        "rmse": 0.5579730466485533,
        "mae": 0.35898475875993646,
        "mape": 0.03299427866145119,
        "explained_variance": 0.3869048288625362,
        "medae": 0.25916163730499253
      }
    },
    "gbr": {
      "metrics_test": {
        "r2": 0.38630705403168486,
        "mse": 0.31158428356753015,
        "rmse": 0.5581973518098506,
        "mae": 0.3797078681706264,
        "mape": 0.03484135782089295,
        "explained_variance": 0.3873471665630166,
        "medae": 0.28236043301972646
      }
    },
    "hgbt": {
      "metrics_test": {
        "r2": 0.37780058195480426,
        "mse": 0.31590319097093855,
        "rmse": 0.5620526585391609,
        "mae": 0.3682429371951301,
        "mape": 0.03390386495177573,
        "explained_variance": 0.37981315564269746,
        "medae": 0.24417693433619903
      }
    },
    "xgboost": {
      "metrics_test": {
        "r2": 0.2503490142286132,
        "mse": 0.38061292192094054,
        "rmse": 0.616938345315754,
        "mae": 0.40980021217334756,
        "mape": 0.0377870615252673,
        "explained_variance": 0.25873412312716026,
        "medae": 0.29943032826267757
      }
    },
    "lightgbm": {
      "metrics_test": {
        "r2": 0.37661521759888394,
        "mse": 0.3165050243568888,
        "rmse": 0.5625877925772019,
        "mae": 0.37213670831644224,
        "mape": 0.03429161872305949,
        "explained_variance": 0.3803208186000323,
        "medae": 0.26646798399731164
      }
    },
    "catboost": {
      "metrics_test": {
        "r2": 0.4156659252775461,
        "mse": 0.2966781926248369,
        "rmse": 0.5446817351672781,
        "mae": 0.3790017067735754,
        "mape": 0.034531977023808814,
        "explained_variance": 0.4212228801410164,
        "medae": 0.2867637527199083
      }
    }
  },
  "df_validation_results_path": "models\\validation_results.csv"
}